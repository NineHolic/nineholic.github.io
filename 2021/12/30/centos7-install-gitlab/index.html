<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Centos7 下安装配置 Gitlab &mdash; Nine</title><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/components/collection.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/globals/common.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/css/posts/index.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://blog.nine.gt.tc/rouge-themes/dist/github.css"><link rel="canonical" href="https://blog.nine.gt.tc/2021/12/30/centos7-install-gitlab/"><link rel="alternate" type="application/atom+xml" title="Nine" href="https://blog.nine.gt.tc/feed.xml"><link rel="shortcut icon" href="https://blog.nine.gt.tc/favicon.ico"><meta property="og:title" content="Centos7 下安装配置 Gitlab"><meta name="keywords" content="Linux, Centos, Gitlab"><meta name="og:keywords" content="Linux, Centos, Gitlab"><meta name="description" content="Centos7 下 Gitlab 的安装配置与备份恢复"><meta name="og:description" content="Centos7 下 Gitlab 的安装配置与备份恢复"><meta property="og:url" content="https://blog.nine.gt.tc/2021/12/30/centos7-install-gitlab/"><meta property="og:site_name" content="Nine"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2021-12-30"> <script src="https://blog.nine.gt.tc/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://blog.nine.gt.tc/assets/js/main.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7093222719567591" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-196771212-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-196771212-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1> <a href="https://blog.nine.gt.tc/" title="Nine" class="title-info"> <img src="https://blog.nine.gt.tc/assets/images/avatar.jpeg" class="avatar-top avatar-user avatar avatar-small">Nine </a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://blog.nine.gt.tc/" class="site-header-nav-item" target="" title="首页">首页</a> <a href="https://blog.nine.gt.tc/categories/" class="site-header-nav-item" target="" title="分类">分类</a> <a href="https://blog.nine.gt.tc/archives/" class="mobile-hidden site-header-nav-item" target="" title="归档">归档</a> <a href="https://blog.nine.gt.tc/fragments/" class="site-header-nav-item" target="" title="片段">片段</a> <a href="https://blog.nine.gt.tc/wiki/" class="site-header-nav-item" target="" title="维基">维基</a> <a href="https://blog.nine.gt.tc/links/" class="mobile-hidden site-header-nav-item" target="" title="链接">链接</a> <a href="https://blog.nine.gt.tc/about/" class="site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://blog.nine.gt.tc/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Centos7 下安装配置 G"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Centos7 下安装配置 Gitlab</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/12/30 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://blog.nine.gt.tc/categories/#Gitlab" title="Gitlab">Gitlab</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 5461 字，约 16 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>Centos7 下 Gitlab 的安装配置与备份恢复</p><h5 id="1gitlab-介绍">1、Gitlab 介绍</h5><p>GitLab 是利用 Ruby on Rails 一个开源的版本管理系统，实现一个自托管的 Git 项目仓库，可通过 Web 界面进行访问公开的或者私人项目。</p><p>GitLab 能够浏览源代码，管理缺陷和注释。可以管理团队对仓库的访问，它非常易于浏览提交过的版本并提供一个文件历史库。团队成员可以利用内置的简单聊天程序 (Wall) 进行交流。</p><p>它还提供一个代码片段收集功能可以轻松实现代码复用，便于日后有需要的时候进行查找</p><p><strong>Gitlab 服务构成</strong></p><ul><li>Nginx：静态 web 服务器</li><li>gitlab-shell：用于处理 Git 命令和修改 authorized keys 列表</li><li>gitlab-workhorse: 轻量级的反向代理服务器</li><li>logrotate：日志文件管理工具</li><li>postgresql：数据库</li><li>redis：缓存数据库</li><li>sidekiq：用于在后台执行队列任务（异步执行）</li><li>unicorn：An HTTP server for Rack applications，GitLab Rails 应用是托管在这个服务器上面的</li></ul><p><strong>gitlab-ee 和 gitlab-ce 的区别</strong> 关于 gitlab-ee（企业版）和 gitlab-ce（社区版），二者是基于同样的核心代码进行开发，只是 gitlab-ee 功能更强大，但需要付费使用，有 30 天试用期。但试用期过后如果不付费，它就跟 gitlab-ce 功能是完全一样的，只是需要付费的功能无法再继续使用而已。</p><h5 id="2安装-gitlab">2、安装 Gitlab</h5><p>安装要求：<a href="https://docs.gitlab.com/ee/install/requirements.html">https://docs.gitlab.com/ee/install/requirements.html</a></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 安装依赖</span>
yum <span class="nb">install</span> <span class="nt">-y</span> curl policycoreutils-python openssh-server perl

<span class="c"># 启动ssh</span>
systemctl <span class="nb">enable </span>sshd
systemctl start sshd

<span class="c"># 将http和https加入防火墙策略，并重启防火墙。</span>
systemctl start firewalld
firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-service</span><span class="o">=</span>http
firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-service</span><span class="o">=</span>https
systemctl reload firewalld
systemctl <span class="nb">enable </span>firewalld

<span class="c"># 安装 postfix 发邮件功能，若使用外部 SMTP 服务器发送邮件可以不必安装</span>
yum <span class="nb">install</span> <span class="nt">-y</span> postfix
systemctl <span class="nb">enable </span>postfix
systemctl start postfix
</code></pre></div></div><ul><li><p>离线安装</p><p>rpm 镜像：<a href="https://packages.gitlab.com/gitlab/gitlab-ee">https://packages.gitlab.com/gitlab/gitlab-ee</a></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 下载安装 rpm 包，本机为 centos7</span>
wget <span class="nt">--content-disposition</span> https://packages.gitlab.com/gitlab/gitlab-ee/packages/el/7/gitlab-ee-14.6.0-ee.0.el7.x86_64.rpm/download.rpm
  
rpm <span class="nt">-ivh</span> gitlab-ee-14.6.0-ee.0.el7.x86_64.rpm
</code></pre></div></div></li><li><p>在线安装</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 配置 gitlab-ce 的 yum 库</span>
curl <span class="nt">-sS</span> https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | <span class="nb">sudo </span>bash
  
<span class="c"># 在线安装gitlab-ee</span>
yum <span class="nb">install</span> <span class="nt">-y</span> gitlab-ee
  
<span class="c"># 如果要安装指定的版本，在后面填上版本号即可</span>
yum <span class="nb">install</span> <span class="nt">-y</span> gitlab-ee-14.6.0
</code></pre></div></div></li></ul><h5 id="3修改配置">3、修改配置</h5><p>修改 Gitlab 主配置文件：<code class="language-plaintext highlighter-rouge">vim /etc/gitlab/gitlab.rb</code></p><p>在 vim 下输入<code class="language-plaintext highlighter-rouge">/关键字</code> 快速查找，按 n 键查找下一个</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 改为需要配置的域名或 IP，内网则为本机 IP</span>
<span class="s">external_url 'http://192.168.0.250'</span>

<span class="c1"># 修改监听端口，默认 80</span>
<span class="s">nginx['listen_port'] = </span><span class="m">22333</span>

<span class="c1"># ssh 地址配置，端口保持与 ssh 登录端口一致</span>
<span class="s">gitlab_rails['gitlab_ssh_host'] = '192.168.0.250'</span>
<span class="s">gitlab_rails['gitlab_shell_ssh_port'] = </span><span class="m">30001</span>

<span class="c1"># Email 设置</span>
<span class="s">gitlab_rails['gitlab_email_enabled'] = </span><span class="no">true</span>
<span class="s">gitlab_rails['gitlab_email_from'] = 'xxx@qq.com'</span>      <span class="c1"># 自己的邮箱</span>
<span class="s">gitlab_rails['gitlab_email_display_name'] = 'Name'</span>    <span class="c1"># gitlab 给你发邮件时使用的名字。</span>
</code></pre></div></div><p>以下配置按需修改</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 若未安装 postfix，则需要配置 smtp</span>
<span class="s">gitlab_rails['smtp_enable'] = </span><span class="no">true</span>
<span class="s">gitlab_rails['smtp_address'] = "smtp.qq.com"</span>
<span class="s">gitlab_rails['smtp_port'] = </span><span class="m">465</span>
<span class="s">gitlab_rails['smtp_user_name'] = "xxxx@qq.com"</span>
<span class="s">gitlab_rails['smtp_password'] = "xxxxxxxxxxx"</span>
<span class="s">gitlab_rails['smtp_domain'] = "qq.com"</span>
<span class="s">gitlab_rails['smtp_authentication'] = "login"</span>
<span class="s">gitlab_rails['smtp_enable_starttls_auto'] = </span><span class="no">true</span>
<span class="s">gitlab_rails['smtp_tls'] = </span><span class="no">false</span>

<span class="c1"># 关闭普罗米修斯监控（内存低时可以关闭节省资源）</span>
<span class="s">prometheus['enable'] = </span><span class="no">false</span>
<span class="s">prometheus['monitor_kubernetes'] = </span><span class="no">false</span>
</code></pre></div></div><blockquote><ul><li>/etc/gitlab/gitlab.rb：主配置文件，包含外部URL、仓库目录、备份目录等</li><li>/etc/gitlab/gitlab-secrets.json：（执行gitlab-ctl reconfigure命令行后生成），包含各类密钥的加密信息</li><li>smtp 邮件服务商配置：<a href="https://docs.gitlab.com/omnibus/settings/smtp.html">https://docs.gitlab.com/omnibus/settings/smtp.html</a></li></ul></blockquote><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 重新应用 gitlab 的配置，每次修改/etc/gitlab/gitlab.rb 文件之后执行</span>
gitlab-ctl reconfigure

<span class="c"># 查看初始密码</span>
<span class="nb">cat</span> /etc/gitlab/initial_root_password

<span class="c"># 或者直接重置密码，此命令从 13.9 版本后可用</span>
gitlab-rake <span class="s2">"gitlab:password:reset"</span>

<span class="c"># 开放端口</span>
firewall-cmd <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--permanent</span> <span class="nt">--add-port</span><span class="o">=</span>22333/tcp
firewall-cmd <span class="nt">--reload</span>

<span class="c"># 查看状态</span>
gitlab-ctl status
</code></pre></div></div><p><img src="https://fastly.jsdelivr.net/gh/FlyNine/cloudimage/git/image-20220404235024738.png" alt="image-20220404235024738" /></p><p>安装完成后建议关闭注册功能</p><h5 id="4gitlab-备份">4、Gitlab 备份</h5><p>默认备份目录：<code class="language-plaintext highlighter-rouge">/var/opt/gitlab/backups</code></p><p>修改 gitlab 配置文件：<code class="language-plaintext highlighter-rouge">vim /etc/gitlab/gitlab.rb</code></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 指定备份后数据存放的路径、权限、时间配置</span>
gitlab_rails[<span class="s1">'manage_backup_path'</span><span class="o">]</span> <span class="o">=</span> <span class="nb">true</span>                  <span class="c">#292行      开启备份功能</span>
gitlab_rails[<span class="s1">'backup_path'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"/gitlab_backup"</span>         <span class="c">#293行      指定备份的路径</span>
gitlab_rails[<span class="s1">'backup_archive_permissions'</span><span class="o">]</span> <span class="o">=</span> 0644          <span class="c">#296行      备份文件的权限</span>
gitlab_rails[<span class="s1">'backup_keep_time'</span><span class="o">]</span> <span class="o">=</span> 604800                  <span class="c">#301行      备份保留时间（保留7天）</span>
</code></pre></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 创建备份目录并授权</span>
<span class="nb">mkdir</span> /gitlab_backup
<span class="nb">chown</span> <span class="nt">-R</span> git:root /gitlab_backup/

<span class="c"># 重新生效 gitlab 配置</span>
gitlab-ctl reconfigure

<span class="c"># 手动备份</span>
gitlab-rake gitlab:backup:create

<span class="c"># 定时备份</span>
0 3 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /opt/gitlab/bin/gitlab-rake gitlab:backup:create <span class="o">&gt;&gt;</span> /gitlab_backup/crontab.log 2&gt;&amp;1
</code></pre></div></div><h5 id="5gitlab-恢复">5、Gitlab 恢复</h5><p><strong>只能还原到与备份文件相同的 gitlab 版本</strong></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 下载安装与备份相同版本的 gitlab</span>
wget <span class="nt">--content-disposition</span> https://packages.gitlab.com/gitlab/gitlab-ee/packages/el/7/gitlab-ee-13.10.3-ee.0.el7.x86_64.rpm/download.rpm

rpm <span class="nt">-ivh</span> gitlab-ee-13.10.3-ee.0.el7.x86_64.rpm

<span class="c"># 参考上述安装修改配置</span>
vim /etc/gitlab/gitlab.rb
gitlab-ctl reconfigure

<span class="c"># 停止相关数据连接服务</span>
gitlab-ctl stop unicorn
gitlab-ctl stop sidekiq

<span class="c"># 将备份文件放在相应的备份路径下</span>
<span class="nb">mv </span>1618907900_2021_04_20_13.10.3-ee_gitlab_backup.tar /var/opt/gitlab/backups/
<span class="nb">chmod </span>777 1618907900_2021_04_20_13.10.3-ee_gitlab_backup.tar

<span class="c"># gitlab 的恢复操作会先将当前所有的数据清空</span>
gitlab-rake gitlab:backup:restore <span class="nv">BACKUP</span><span class="o">=</span>1618907900_2021_04_20_13.10.3-ee
</code></pre></div></div><p><img src="https://fastly.jsdelivr.net/gh/FlyNine/cloudimage/git/image-20220317225958638.png" alt="image-20220317225958638" /></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 重启 gitlab</span>
gitlab-ctl restart

<span class="c"># 恢复命令完成后，可以 check 检查一下恢复情况</span>
gitlab-rake gitlab:check <span class="nv">SANITIZE</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></div><p>其它命令</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 日志目录：/var/log/gitlab</span>
<span class="c"># 查看 nginx 访问日志</span>
gitlab-ctl <span class="nb">tail </span>nginx/gitlab_acces.log	

<span class="c"># 查看 postgresql 日志</span>
gitlab-ctl <span class="nb">tail </span>postgresql

<span class="c"># 查看所有服务</span>
gitlab-ctl service-list

<span class="c"># 检查配置并启动</span>
gitlab-ctl check-config
</code></pre></div></div><h5 id="6其他">6、其他</h5><p><strong>修改 root 密码</strong></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 直接重置密码，此命令从 13.9 版本后可用</span>
gitlab-rake <span class="s2">"gitlab:password:reset"</span>

<span class="c"># 进控制台修改</span>
gitlab-rails console <span class="nt">-e</span> production
user.password <span class="o">=</span> <span class="s1">'new_password'</span>
user.password_confirmation <span class="o">=</span> <span class="s1">'new_password'</span>
user.save!
<span class="nb">exit</span>
</code></pre></div></div><ul><li><a href="https://docs.gitlab.com/ee/security/reset_user_password.html#use-a-rails-console">https://docs.gitlab.com/ee/security/reset_user_password.html#use-a-rails-console</a></li></ul><p><strong>添加SSL认证</strong></p><p>参考 <a href="https://blog.csdn.net/qq_43626147/article/details/109160229">https://blog.csdn.net/qq_43626147/article/details/109160229</a></p><p><strong>Gitlab 管理页面保存后报 500 错误</strong></p><p>首先，遍历数据库中所有可能的加密值，验证它们是否可使用 gitlab-secrets.json解密。</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitlab-rake gitlab:doctor:secrets
</code></pre></div></div><p><img src="https://fastly.jsdelivr.net/gh/FlyNine/cloudimage/git/image-20211230095708439.png" alt="image-20211230095708439" /></p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitlab-rails dbconsole
</code></pre></div></div><div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Clear project tokens</span>
<span class="k">UPDATE</span> <span class="n">projects</span> <span class="k">SET</span> <span class="n">runners_token</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">runners_token_encrypted</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

<span class="c1">-- Clear project tokens</span>
<span class="k">UPDATE</span> <span class="n">projects</span> <span class="k">SET</span> <span class="n">runners_token</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">runners_token_encrypted</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="c1">-- Clear group tokens</span>
<span class="k">UPDATE</span> <span class="n">namespaces</span> <span class="k">SET</span> <span class="n">runners_token</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">runners_token_encrypted</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="c1">-- Clear instance tokens</span>
<span class="k">UPDATE</span> <span class="n">application_settings</span> <span class="k">SET</span> <span class="n">runners_registration_token_encrypted</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="c1">-- Clear key used for JWT authentication</span>
<span class="c1">-- This may break the $CI_JWT_TOKEN job variable:</span>
<span class="c1">-- https://gitlab.com/gitlab-org/gitlab/-/issues/325965</span>
<span class="k">UPDATE</span> <span class="n">application_settings</span> <span class="k">SET</span> <span class="n">encrypted_ci_jwt_signing_key</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="c1">-- Clear runner tokens</span>
<span class="k">UPDATE</span> <span class="n">ci_runners</span> <span class="k">SET</span> <span class="n">token</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">token_encrypted</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

<span class="c1">-- truncate web_hooks table</span>
<span class="k">TRUNCATE</span> <span class="n">web_hooks</span> <span class="k">CASCADE</span><span class="p">;</span>
</code></pre></div></div><p><strong>参考</strong></p><ul><li><a href="https://docs.gitlab.com/ee/administration/raketasks/doctor.html#verify-database-values-can-be-decrypted-using-the-current-secrets">Doctor Rake tasks</a></li><li><a href="https://docs.gitlab.com/ee/raketasks/backup_restore.html#reset-runner-registration-tokens">Reset runner registration tokens</a></li><li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/26171">Issue-26171</a></li><li><a href="https://www.cnblogs.com/hgzero/p/14088215.html">Gitlab的安装及使用</a></li></ul><div style="font-size: 16px;border-left: 3px solid #3498db;background-color:#f0f8ff;padding: 16px 0px 1px 1px;border-radius: 3px;"><ul><li>本文作者：<a href="https://blog.nine.gt.tc" target="_blank">Nine</a></li><li>本文链接：<a href="https://blog.nine.gt.tc/2021/12/30/centos7-install-gitlab/" target="_blank">https://blog.nine.gt.tc/2021/12/30/centos7-install-gitlab/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://giscus.app/client.js" data-repo="NineHolic/blog-comments" data-repo-id="MDEwOlJlcG9zaXRvcnkzNjU4ODk4MzQ=" data-category="Announcements" data-category-id="DIC_kwDOFc8JKs4CwE7i" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://blog.nine.gt.tc/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://blog.nine.gt.tc/assets/search_data.json?v=1760518734', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://blog.nine.gt.tc/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"> <ins class="adsbygoogle" style="display:block" data-ad-client="" data-ad-slot="" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © <script>document.write(new Date().getFullYear())</script> <span title="Nine">Nine</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/NineHolic/nineholic.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://blog.nine.gt.tc/" title="首页" target="">首页</a></li><li> <a href="https://blog.nine.gt.tc/categories/" title="分类" target="">分类</a></li><li> <a href="https://blog.nine.gt.tc/archives/" title="归档" target="">归档</a></li><li> <a href="https://blog.nine.gt.tc/fragments/" title="片段" target="">片段</a></li><li> <a href="https://blog.nine.gt.tc/wiki/" title="维基" target="">维基</a></li><li> <a href="https://blog.nine.gt.tc/links/" title="链接" target="">链接</a></li><li> <a href="https://blog.nine.gt.tc/about/" title="关于" target="">关于</a></li><li><a href="https://blog.nine.gt.tc/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul><script async src="https://blog.nine.gt.tc/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量 <span id="busuanzi_value_site_pv"></span> 次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数 <span id="busuanzi_value_site_uv"></span> 人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量 <span id="busuanzi_value_page_pv"></span> 次 / 统计始于 2021-05-01 </span> <span id="runtime_span"> <script type="text/javascript"> function show_runtime() { window.setTimeout("show_runtime()", 1000); X = new Date("05/10/2021 16:20:00"); Y = new Date(); T = (Y.getTime() - X.getTime()); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60); runtime_span.innerHTML = "/ 本站已运行 " + A + " 天 " + B + " 小时 " + C + " 分 " + D + " 秒" } show_runtime(); </script> </span></div></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://blog.nine.gt.tc/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
